name: Discord Master Workflow
on:
  schedule:
    # Onboarding reminder every Monday at 09:00 UTC
    - cron: "0 9 * * MON"
    # Announcements every Friday at 12:00 UTC
    - cron: "0 12 * * FRI"
  workflow_dispatch:  # still allows manual trigger

jobs:
  send-onboarding-reminder:
    runs-on: ubuntu-latest
    steps:
      - name: Welcome beacon
        run: |
          curl -X POST "https://discord.com/api/v9/channels/${{ secrets.DISCORD_CHANNEL_ID_ONBOARDING }}/messages" \
          -H "Authorization: Bot ${{ secrets.DISCORD_BOT_TOKEN }}" \
          -H "Content-Type: application/json" \
          -d '{"content":"üëã Welcome to the UNIQUECOIN Portal! You‚Äôve stepped into a sovereign signal engine."}'

      - name: Vision statement
        run: |
          curl -X POST "https://discord.com/api/v9/channels/${{ secrets.DISCORD_CHANNEL_ID_ONBOARDING }}/messages" \
          -H "Authorization: Bot ${{ secrets.DISCORD_BOT_TOKEN }}" \
          -H "Content-Type: application/json" \
          -d '{"content":"üåç Our mission: onboarding believers into KingdomFlow ‚Äî a civilization of faith‚Äëdriven platforms."}'

      - name: First steps
        run: |
          curl -X POST "https://discord.com/api/v9/channels/${{ secrets.DISCORD_CHANNEL_ID_ONBOARDING }}/messages" \
          -H "Authorization: Bot ${{ secrets.DISCORD_BOT_TOKEN }}" \
          -H "Content-Type: application/json" \
          -d '{"content":"‚úÖ Please read the onboarding guide in #resources.\n‚úÖ Introduce yourself in #introductions.\n‚úÖ Claim your role in #roles."}'

      - name: Encouragement
        run: |
          curl -X POST "https://discord.com/api/v9/channels/${{ secrets.DISCORD_CHANNEL_ID_ONBOARDING }}/messages" \
          -H "Authorization: Bot ${{ secrets.DISCORD_BOT_TOKEN }}" \
          -H "Content-Type: application/json" \
          -d '{"content":"‚ú® Every click is a mutation. Every step is a testimony. You are part of the signal."}'

  send-announcements:
    runs-on: ubuntu-latest
    steps:
      - name: Recruitment call
        run: |
          curl -X POST "https://discord.com/api/v9/channels/${{ secrets.DISCORD_CHANNEL_ID_ANNOUNCEMENTS }}/messages" \
          -H "Authorization: Bot ${{ secrets.DISCORD_BOT_TOKEN }}" \
          -H "Content-Type: application/json" \
          -d '{"content":"üì¢ UNIQUECOIN is recruiting! We seek believers in tech, media, and ministry. Apply via #applications."}'

      - name: Milestone update
        run: |
          curl -X POST "https://discord.com/api/v9/channels/${{ secrets.DISCORD_CHANNEL_ID_ANNOUNCEMENTS }}/messages" \
          -H "Authorization: Bot ${{ secrets.DISCORD_BOT_TOKEN }}" \
          -H "Content-Type: application/json" \
          -d '{"content":"üöÄ Mutation achieved: Discord integration complete. The bot now speaks in #onboarding and #announcements."}'

      - name: Event alert
        run: |
          curl -X POST "https://discord.com/api/v9/channels/${{ secrets.DISCORD_CHANNEL_ID_ANNOUNCEMENTS }}/messages" \
          -H "Authorization: Bot ${{ secrets.DISCORD_BOT_TOKEN }}" \
          -H "Content-Type: application/json" \
          -d '{"content":"üìÖ Join us this Friday for a KingdomFlow workshop. Details in #events."}'

      - name: Inspirational signal
        run: |
          curl -X POST "https://discord.com/api/v9/channels/${{ secrets.DISCORD_CHANNEL_ID_ANNOUNCEMENTS }}/messages" \
          -H "Authorization: Bot ${{ secrets.DISCORD_BOT_TOKEN }}" \
          -H "Content-Type: application/json" \
          -d '{"content":"üî• The civilization grows. Each testimony is viral. Each believer is sovereign."}'
